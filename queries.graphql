# SPDX-FileCopyrightText: 2023 Magenta ApS <https://magenta.dk>
# SPDX-License-Identifier: MPL-2.0

query GetManagers {
  managers(filter: {
    from_date: null, to_date: null
  }) {
    objects {
      objects {
        uuid
        org_unit {
          uuid
        }
        employee {
          engagements {
            uuid
            org_unit {
              uuid
            }
            validity {
              from
              to
            }
          }
        }
        validity {
          from
          to
        }
      }
    }
  }
}

mutation TerminateManager($uuid: UUID!, $terminate_from: DateTime, $terminate_to: DateTime!) {
  manager_terminate(input: {
    uuid: $uuid,
    from: $terminate_from
    to: $terminate_to
  }) {
    uuid
  }
}

query GetEngagementObjects($engagement_uuid: UUID!) {
  engagements(filter: {uuids: [$engagement_uuid]}) {
    objects {
      objects {
        org_unit {
          uuid
          name
        }
        validity {
          from
          to
        }
        employee {
          uuid
          engagements {
            uuid
            org_unit {
              uuid
            }
            validity {
              from
              to
            }
          }
          manager_roles {
            uuid
            org_unit {
              uuid
            }
            validity {
              from
              to
            }
          }
        }
      }
    }
  }
}
